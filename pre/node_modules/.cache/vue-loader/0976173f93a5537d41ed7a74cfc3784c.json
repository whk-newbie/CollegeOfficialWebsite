{"remainingRequest":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\CollegeOfficialWebsite\\pre\\src\\views\\EnrollmentAndEmployment\\Enrollment.vue?vue&type=style&index=0&id=7f29e06e&scoped=true&lang=css","dependencies":[{"path":"D:\\CollegeOfficialWebsite\\pre\\src\\views\\EnrollmentAndEmployment\\Enrollment.vue","mtime":1651753601708},{"path":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\css-loader\\dist\\cjs.js","mtime":1642308228192},{"path":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1642308231200},{"path":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\postcss-loader\\src\\index.js","mtime":1642308229462},{"path":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642308227120},{"path":"D:\\CollegeOfficialWebsite\\pre\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1642308229846}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpAaW1wb3J0ICJ+QC9zdHlsZXMvYm9keS5jc3MiOw0K"},{"version":3,"sources":["D:\\CollegeOfficialWebsite\\pre\\src\\views\\EnrollmentAndEmployment\\Enrollment.vue"],"names":[],"mappings":";AAqMA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/CollegeOfficialWebsite/pre/src/views/EnrollmentAndEmployment/Enrollment.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <Header/>\r\n  <div class=\"container\">\r\n    <el-container>\r\n      <el-aside width=\"20%\">\r\n        <el-menu\r\n            default-active=\"activeMenu\"\r\n            class=\"el-menu-vertical-demo\"\r\n            @select=\"handleSelect\"\r\n            :default-openeds=\"defaultopen\"\r\n            background-color=\"#92f6ce\"\r\n            unique-opened=true\r\n        >\r\n          <el-sub-menu index=\"1\">\r\n            <template #title>\r\n              <span>本科生</span>\r\n            </template>\r\n            <el-menu-item index=\"1-1\">招生</el-menu-item>\r\n            <el-menu-item index=\"1-2\">就业</el-menu-item>\r\n          </el-sub-menu>\r\n          <el-sub-menu index=\"2\">\r\n            <template #title>\r\n              <span>研究生</span>\r\n            </template>\r\n            <el-menu-item index=\"2-1\">招生</el-menu-item>\r\n            <el-menu-item index=\"2-2\">就业</el-menu-item>\r\n          </el-sub-menu>\r\n        </el-menu>\r\n      </el-aside>\r\n      <el-container>\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>当前位置:</el-breadcrumb-item>\r\n          <el-breadcrumb-item :to=\"{ path: '/home' }\">主页</el-breadcrumb-item>\r\n          <el-breadcrumb-item>{{ category }}</el-breadcrumb-item>\r\n          <el-breadcurmb-item>{{ where }}</el-breadcurmb-item>\r\n        </el-breadcrumb>\r\n        <el-header><p>{{ where }}</p></el-header>\r\n        <el-main>\r\n          <div class=\"news-list\">\r\n            <el-table :data=\"inforsList.slice((currentPage-1)*pageSize,currentPage*pageSize)\" style=\"width: 100%\"\r\n                      @cell-click=\"changetodetail\">\r\n              <el-table-column prop=\"title\" label=\"标题\" width=\"600px\"/>\r\n              <el-table-column prop=\"create_time\" label=\"时间\" width=\"300px\" :formatter=\"formatted_time\"/>\r\n            </el-table>\r\n          </div>\r\n          <div class=\"paginationbox\">\r\n            <el-pagination\r\n                v-model:currentPage=\"currentPage\"\r\n                :page-sizes=\"[10, 20, 30, 40]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"totalPages\"\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </el-main>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n\r\n  <Footer/>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Header from \"@/components/Header\";\r\nimport Footer from \"@/components/Footer\";\r\nimport axios from 'axios'\r\nimport formatted_time from '@/composables/formatted_time';\r\n\r\nexport default {\r\n  name: \"Enrollment\",\r\n  components: {Header, Footer},\r\n  created() {\r\n    this.judge()\r\n  },\r\n  data() {\r\n    return {\r\n      inforsList: [],\r\n      totalPages: 0,\r\n      pageSize: 10,\r\n      currentPage: 1,\r\n      detail: 'majorDetail',\r\n      category: \"本科生\",\r\n      activeMenu: \"1-1\",\r\n      defaultopen: ['1',],\r\n      where: '招生',\r\n      formatted_time\r\n    }\r\n  },\r\n  methods: {\r\n    getList(url) {\r\n      axios\r\n          .get(url)\r\n          .then(response => {\r\n            (this.totalPages = response.data.count),\r\n                (this.inforsList = response.data.results)\r\n            // console.log(this.newsList)\r\n            if (response.data.next !== null) {\r\n              this.getData(response.data.next.charAt(response.data.next.length - 1), url)\r\n            }\r\n          })\r\n      this.loading = false;\r\n    },\r\n    getData(number, url) {\r\n      axios.get(url, {params: {page: number}})\r\n          .then(response => {\r\n                this.inforsList = this.inforsList.concat(response.data.results)\r\n                // console.log(this.newsList)\r\n                if (response.data.next !== null) {\r\n                  this.getData(response.data.next.charAt(response.data.next.length - 1), url)\r\n                }\r\n              }\r\n          )\r\n    },\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`);\r\n      this.pageSize = val;\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`);\r\n      this.currentPage = val;\r\n    },\r\n    changetodetail(row) {\r\n      this.$router.push({name: this.detail, params: {id: row.id}})\r\n    },\r\n    handleSelect(key) {\r\n      if (key === '1-1') {\r\n        this.$router.push('/graduate/enrollment')\r\n        this.judge()\r\n        // console.log(\"change sucessful\")\r\n      }\r\n      if (key === '1-2') {\r\n        this.$router.push('/graduate/employment')\r\n        this.judge()\r\n      }\r\n      if (key === '2-1') {\r\n        this.$router.push('/undergraduate/enrollment')\r\n        this.judge()\r\n      }\r\n      if (key === '2-2') {\r\n        this.$router.push('/undergraduate/employment')\r\n        this.judge()\r\n      }\r\n    },\r\n    judge() {\r\n      // console.log(this.$route.fullPath)\r\n      const paths = this.$route.fullPath.split('/')\r\n      // console.log(paths)\r\n      if (paths[1] === \"graduate\") {\r\n        if (paths[2] === 'enrollment') {\r\n\r\n          this.detail = \"majorDetail\"\r\n          this.where = \"招生\"\r\n          this.category = \"本科生\"\r\n          this.activeMenu = '1-1'\r\n          this.defaultopen = ['1',]\r\n          this.getList('/api/student/enrollment?category=本科生')\r\n        } else {\r\n\r\n          this.detail = \"majorDetail\"\r\n          this.where = \"就业\"\r\n          this.category = \"本科生\"\r\n          this.activeMenu = '1-2'\r\n          this.defaultopen = ['1',]\r\n          this.getList('/api/student/employment?category=本科生')\r\n        }\r\n\r\n      }\r\n      if (paths[1] === \"undergraduate\") {\r\n\r\n        if (paths[2] === 'enrollment') {\r\n\r\n          this.detail = \"majorDetail\"\r\n          this.where = \"招生\"\r\n          this.category = \"研究生\"\r\n          this.activeMenu = '2-1'\r\n          this.defaultopen = ['2',]\r\n          this.getList('/api/student/enrollment?category=研究生')\r\n        } else {\r\n\r\n          this.detail = \"majorDetail\"\r\n          this.where = \"就业\"\r\n          this.category = \"研究生\"\r\n          this.activeMenu = '2-2'\r\n          this.defaultopen = ['2',]\r\n          this.getList('/api/student/employment?category=研究生')\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"~@/styles/body.css\";\r\n</style>\r\n"]}]}